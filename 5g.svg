<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="100%" height="100%">
  <defs>

    <filter id="textbookShadowBlur" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="12" />
    </filter>
    <linearGradient id="towerMetal" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#e0f7fa"/>
      <stop offset="100%" stop-color="#b2ebf2"/>
    </linearGradient>
    <linearGradient id="signalBeam" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#00e5ff"/>
      <stop offset="100%" stop-color="#2979ff"/>
    </linearGradient>
    <linearGradient id="chipBody" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#80d8ff"/>
      <stop offset="100%" stop-color="#40c4ff"/>
    </linearGradient>
    <linearGradient id="cityLights" x1="0%" y1="100%" x2="0%" y2="0%">
      <stop offset="0%" stop-color="#00b0ff" stop-opacity="0.2"/>
      <stop offset="100%" stop-color="#00e5ff" stop-opacity="1"/>
    </linearGradient>
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="intenseGlow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="5" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <style>

      svg {
        background: radial-gradient(circle at center, #ffffff 0%, #d9fbff 100%);
        /* Ensure it covers the full viewport without being constrained by viewBox layout */
        width: 100vw;
        height: 100vh;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
    
      /* --- 5s NARRATIVE ANIMATION SEQUENCE --- */
      /* 1. Tower transmits (0s - 1s) */
      .tower-pulse { transform-origin: 0px -12px; opacity: 0.5; }
      @keyframes pulseTower {
        0%, 100% { opacity: 0.5; transform: scale(0.9); filter: brightness(1); }
        10%, 20% { opacity: 1; transform: scale(1.3); filter: brightness(1.5); }
      }

      /* 2. Data beam travels to chip (1s - 2.5s) */
      .main-beam { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
      @keyframes travelBeam {
        0%, 15% { stroke-dashoffset: 100; opacity: 0; }
        20% { opacity: 1; stroke-dashoffset: 100; }
        40%, 80% { opacity: 1; stroke-dashoffset: 0; }
        90%, 100% { opacity: 0; stroke-dashoffset: -100; }
      }

      /* 3. Chip processes and flashes (2.5s - 3.5s) */
      .chip-process { transform-origin: 0px 0px; }
      @keyframes flashChip {
        0%, 45% { filter: brightness(1); transform: scale(1); }
        50%, 65% { filter: brightness(1.8); transform: scale(1.1); }
        70%, 100% { filter: brightness(1); transform: scale(1); }
      }

      /* 4. Split beams travel to city and car (3.5s - 4.5s) */
      .split-beam { stroke-dasharray: 60; stroke-dashoffset: 60; opacity: 0; }
      @keyframes travelSplitBeam {
        0%, 60% { stroke-dashoffset: 60; opacity: 0; }
        65% { opacity: 1; stroke-dashoffset: 60; }
        85%, 95% { opacity: 1; stroke-dashoffset: 0; }
        100% { opacity: 0; stroke-dashoffset: -60; }
      }

      /* 5. City lights up and Car sensors activate (4.5s - 5s) */
      .city-activation { opacity: 0; }
      @keyframes lightUpCity {
        0%, 80% { opacity: 0; }
        85%, 95% { opacity: 1; filter: drop-shadow(0 0 5px #00e5ff); }
        100% { opacity: 0; }
      }
      .car-sensor-sweep { transform-origin: 0px -10px; opacity: 0; }
      @keyframes sweepSensor {
        0%, 80% { opacity: 0; transform: scale(0); }
        85%, 95% { opacity: 1; transform: scale(2); }
        100% { opacity: 0; transform: scale(3); }
      }

      svg:hover .tower-pulse { animation: pulseTower 5s ease-in-out forwards; }
      svg:hover .main-beam { animation: travelBeam 5s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
      svg:hover .chip-process { animation: flashChip 5s ease-out forwards; }
      svg:hover .split-beam { animation: travelSplitBeam 5s ease-in-out forwards; }
      svg:hover .city-activation { animation: lightUpCity 5s ease-out forwards; }
      svg:hover .car-sensor-sweep { animation: sweepSensor 5s ease-out forwards; }

      </style>
  </defs>

  <g transform="translate(30, 100)">
    <path d="M -10 0 L 10 0 L 5 -60 L -5 -60 Z" fill="url(#towerMetal)"/>
    <rect x="-2" y="-70" width="4" height="70" fill="#90a4ae"/>
    <g transform="translate(0, -70)">
      <rect x="-12" y="-10" width="24" height="6" rx="2" fill="url(#towerMetal)"/>
      <rect x="-10" y="-18" width="20" height="4" rx="1" fill="url(#towerMetal)"/>
      <circle cx="0" cy="-12" r="5" fill="#00e5ff" filter="url(#intenseGlow)" class="tower-pulse"/>
    </g>
  </g>
  <path d="M 30 25 C 60 25, 80 80, 100 100" fill="none" stroke="url(#signalBeam)" stroke-width="4" stroke-linecap="round" filter="url(#glow)" class="main-beam"/>
  <g transform="translate(100, 100)">
    <g class="chip-process">
      <rect x="-20" y="-20" width="40" height="40" rx="8" fill="url(#chipBody)" stroke="#2979ff" stroke-width="2"/>
      <text x="0" y="8" font-family="sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle" filter="url(#glow)">5G</text>
      <path d="M -20 -10 L -25 -10 M -20 10 L -25 10 M 20 -10 L 25 -10 M 20 10 L 25 10 M -10 -20 L -10 -25 M 10 -20 L 10 -25 M -10 20 L -10 25 M 10 20 L 10 25" stroke="#2979ff" stroke-width="2" stroke-linecap="round"/>
    </g>
  </g>
  <path d="M 115 90 C 130 70, 140 50, 160 40" fill="none" stroke="url(#signalBeam)" stroke-width="3" stroke-linecap="round" filter="url(#glow)" class="split-beam"/>
  <path d="M 115 110 C 130 130, 140 140, 165 135" fill="none" stroke="url(#signalBeam)" stroke-width="3" stroke-linecap="round" filter="url(#glow)" class="split-beam"/>
  <g transform="translate(160, 40)">
    <polygon points="-15 0 -15 -30 -5 -40 5 -30 15 -35 15 0" fill="#cfd8dc"/>
    <rect x="-10" y="-25" width="20" height="25" fill="#b0bec5"/>
    <g class="city-activation" fill="url(#cityLights)" filter="url(#glow)">
      <rect x="-8" y="-22" width="4" height="4"/> <rect x="4" y="-22" width="4" height="4"/>
      <rect x="-8" y="-14" width="4" height="4"/> <rect x="4" y="-14" width="4" height="4"/>
      <rect x="-8" y="-6" width="4" height="4"/>  <rect x="4" y="-6" width="4" height="4"/>
    </g>
  </g>
  <g transform="translate(165, 135)">
    <path d="M -15 5 L -15 -5 L -5 -10 L 10 -10 L 15 -5 L 15 5 Z" fill="#90a4ae"/>
    <rect x="-10" y="-8" width="16" height="5" fill="#eceff1"/> <circle cx="-10" cy="5" r="4" fill="#546e7a"/>
    <circle cx="10" cy="5" r="4" fill="#546e7a"/>
    <circle cx="0" cy="-10" r="15" fill="none" stroke="#00e5ff" stroke-width="2" class="car-sensor-sweep"/>
  </g>
</svg>
