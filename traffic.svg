<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="100%" height="100%">
  <defs>

    <filter id="textbookShadowBlur" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="12" />
    </filter>
    <style>

      svg {
        background: radial-gradient(circle at center, #ffffff 0%, #dee0e2 100%);
        /* Ensure it covers the full viewport without being constrained by viewBox layout */
        width: 100vw;
        height: 100vh;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
    
      svg { cursor: pointer; }
      /* --- Premium 2.5D Scene Container --- */
      .scene {
        transform-origin: 100px 100px;
        transform: perspective(800px) rotateX(45deg) rotateZ(30deg) translate(50px, -15px);
        transform-style: preserve-3d;
      }
      /* Base drop shadows */
      .item-shadow {
        transform-origin: 100px 120px;
        animation: breathShadow 3s ease-in-out infinite;
      }
      @keyframes breathShadow {
        0%, 100% { transform: scale(1); opacity: 0.3; }
        50% { transform: scale(1.05); opacity: 0.2; }
      }
      /* Hover Presentation Story */
      .presentation-group {
        transform-origin: 100px 100px;
        transform-style: preserve-3d;
        /* Beautiful floating breathing loop by default */
        animation: floatIdle 3s ease-in-out infinite;
      }
      @keyframes floatIdle {
        0%, 100% { transform: translateY(0px) rotateX(0deg); }
        50% { transform: translateY(-5px) rotateX(2deg); }
      }
      /* When Hovered: 5-Second Interactive Story */
      svg:hover .presentation-group {
        animation: interactiveStory 5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
      }
      svg:hover .item-shadow {
        animation: interactiveShadow 5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
      }
      @keyframes interactiveStory {
        0%, 5% { transform: translateY(0px) rotateZ(0deg) rotateX(0deg) scale(1); }
        /* Hop up slightly to begin the sequence */
        10%, 80% { transform: translateY(-15px) rotateZ(2deg) rotateX(-2deg) scale(1.05); }
        100% { transform: translateY(0px) rotateZ(0deg) rotateX(0deg) scale(1); }
      }
      @keyframes interactiveShadow {
         0%, 5% { transform: scale(1); opacity: 0.3; }
        10%, 80% { transform: scale(1.1) translate(-5px, -5px); opacity: 0.15; }
        100% { transform: scale(1); opacity: 0.3; }
      }
      /* Traffic Light Sequence */
      .light-state { opacity: 0; }
      .light-red { opacity: 1; } /* Default state */
      svg:hover .light-red { animation: lightRedSeq 5s forwards; }
      svg:hover .light-yellow { animation: lightYellowSeq 5s forwards; }
      svg:hover .light-green { animation: lightGreenSeq 5s forwards; }
      @keyframes lightRedSeq {
        0%, 20% { opacity: 1; }
        21%, 85% { opacity: 0; }
        86%, 100% { opacity: 1; }
      }
      @keyframes lightYellowSeq {
        0%, 20% { opacity: 0; }
        21%, 40% { opacity: 1; }
        41%, 100% { opacity: 0; }
      }
      @keyframes lightGreenSeq {
        0%, 40% { opacity: 0; }
        41%, 85% { opacity: 1; }
        86%, 100% { opacity: 0; }
      }
      /* The Tiny Car Story */
      .mini-car {
        transform-origin: center;
        opacity: 0;
      }
      svg:hover .mini-car {
        animation: driveTaxi 5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
      }
      @keyframes driveTaxi {
        0% { transform: translate(-80px, 80px) rotateZ(-45deg); opacity: 0; }
        2% { opacity: 1; }
        20% { transform: translate(-20px, 20px) rotateZ(-45deg); opacity: 1; } /* Stops exactly at line */
        21%, 40% { transform: translate(-20px, 20px) rotateZ(-45deg); opacity: 1; } /* Waits during yellow */
        41% { transform: translate(-22px, 22px) rotateZ(-47deg) scale(1.05); opacity: 1; } /* Revs on green */
        50%, 100% { transform: translate(120px, -120px) rotateZ(-45deg) scale(0.9); opacity: 0; } /* Zooms away */
      }
      /* Exhaust/Brake Dust Effects */
      .dust { opacity: 0; transform-origin: center; filter: blur(2px); }
      svg:hover .brake-dust { animation: puffBrake 5s ease-out forwards; }
      svg:hover .exhaust-smoke { animation: puffExhaust 5s 2.05s ease-out forwards; }
      @keyframes puffBrake {
        18% { opacity: 0; transform: translate(-25px, 25px) scale(0.5); }
        21% { opacity: 0.6; transform: translate(-30px, 30px) scale(1.5); }
        30%, 100% { opacity: 0; transform: translate(-40px, 40px) scale(2); }
      }
      @keyframes puffExhaust {
        0% { opacity: 0; transform: translate(-25px, 25px) scale(0.5); }
        5% { opacity: 0.8; transform: translate(-35px, 35px) scale(2); filter: blur(3px); }
        15%, 100% { opacity: 0; transform: translate(-50px, 50px) scale(3.5); filter: blur(5px); }
      }
      </style>
    <!-- PREMIUM GRADIENTS & TEXTURES -->
    <!-- Traffic Signal Housing (Glossy Obsidian) -->
    <linearGradient id="housingBody" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#353b48"/>
      <stop offset="20%" stop-color="#576574"/>
      <stop offset="80%" stop-color="#222f3e"/>
      <stop offset="100%" stop-color="#10141a"/>
    </linearGradient>
    <linearGradient id="housingEdge" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#8395a7"/>
      <stop offset="100%" stop-color="#222f3e"/>
    </linearGradient>
    <!-- Metallic Steel Pole -->
    <linearGradient id="steelPole" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#dcdde1"/>
      <stop offset="30%" stop-color="#ffffff"/>
      <stop offset="60%" stop-color="#a4b0be"/>
      <stop offset="100%" stop-color="#2f3640"/>
    </linearGradient>
    <!-- Glowing Lenses (Deep radial gradients for glass look) -->
    <radialGradient id="glowRed" cx="30%" cy="30%" r="70%">
      <stop offset="0%" stop-color="#ffb199"/>
      <stop offset="40%" stop-color="#ff6b81"/>
      <stop offset="90%" stop-color="#c0392b"/>
      <stop offset="100%" stop-color="#5c0000"/>
    </radialGradient>
    <radialGradient id="glowYellow" cx="30%" cy="30%" r="70%">
      <stop offset="0%" stop-color="#fdfbfb"/>
      <stop offset="40%" stop-color="#ffc07c"/>
      <stop offset="90%" stop-color="#da8d41"/>
      <stop offset="100%" stop-color="#805600"/>
    </radialGradient>
    <radialGradient id="glowGreen" cx="30%" cy="30%" r="70%">
      <stop offset="0%" stop-color="#38f9d7"/>
      <stop offset="40%" stop-color="#0ba360"/>
      <stop offset="90%" stop-color="#008f73"/>
      <stop offset="100%" stop-color="#003d31"/>
    </radialGradient>
    <!-- Off state lenses (Dark glass) -->
    <radialGradient id="glassOff" cx="50%" cy="50%" r="50%">
      <stop offset="60%" stop-color="#263238"/>
      <stop offset="100%" stop-color="#10141a"/>
    </radialGradient>
    <!-- Tiny Taxi Paint -->
    <linearGradient id="taxiYellow" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#fdfbfb"/>
      <stop offset="40%" stop-color="#ffc07c"/>
      <stop offset="100%" stop-color="#cc8e00"/>
    </linearGradient>
    <!-- Filters -->
    <filter id="beautyGlow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="1.5" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="castGlowLight" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="6"/>
      <feComponentTransfer><feFuncA type="linear" slope="0.8"/></feComponentTransfer>
    </filter>
    <filter id="presentationShadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="20" dy="15" stdDeviation="12" flood-color="#10141a" flood-opacity="0.25"/>
    </filter>
  </defs>

  <g class="scene">
    <!-- === PREMIUM INTERSECTION BASE === -->
    <!-- Street/Intersection markings -->
    <g opacity="0.5">
      <!-- Pedestrian Island/Curb curve -->
      <path d="M 120 0 Q 120 70 180 70" fill="#f5f6fa" opacity="0.1" />
      <path d="M 120 0 Q 120 70 180 70" fill="none" stroke="#8395a7" stroke-width="4" />
      <path d="M 120 0 Q 120 70 180 70" fill="none" stroke="#dcdde1" stroke-width="1.5" />
      <!-- Stop Line (Thick bright white) -->
      <path d="M 35 -15 L 95 45" stroke="#ffffff" stroke-width="6" stroke-linecap="round" />
      <!-- Road dashed line (More elegant flush-mounted road stripes) -->
      <path d="M -20 50 L 30 100" stroke="#f6a565" stroke-width="4" stroke-dasharray="12 12" stroke-linecap="square" opacity="0.8" />
      <path d="M -22 52 L 28 102" stroke="#d49a15" stroke-width="2" stroke-dasharray="12 12" stroke-linecap="square" opacity="0.5" />
      <!-- Crosswalk lines -->
      <path d="M 50 20 L 70 0 M 60 30 L 80 10 M 70 40 L 90 20 M 80 50 L 100 30" stroke="#f5f6fa" stroke-width="4" stroke-linecap="round" opacity="0.8" />
    </g>
    <g filter="url(#presentationShadow)">
      <!-- Cast Floor Shadow -->
      <ellipse cx="140" cy="55" rx="20" ry="10" fill="#37474f" class="item-shadow" transform="rotate(30 140 55)" />
      <g class="presentation-group">
        <!-- ============================== -->
        <!-- PREMIUM TRAFFIC SIGNAL POLE    -->
        <!-- ============================== -->
        <!-- Heavy Base Flange -->
        <ellipse cx="140" cy="50" rx="14" ry="7" fill="#8395a7" />
        <path d="M 126 45 L 154 45 L 154 50 C 154 57, 126 57, 126 50 Z" fill="#2f3640" />
        <ellipse cx="140" cy="45" rx="14" ry="7" fill="#576574" />
        <!-- Base Bolt details -->
        <circle cx="130" cy="45" r="1.5" fill="#a4b0be" />
        <circle cx="150" cy="45" r="1.5" fill="#a4b0be" />
        <circle cx="140" cy="40" r="1.5" fill="#a4b0be" />
        <circle cx="140" cy="50" r="1.5" fill="#a4b0be" />
        <!-- The Main Galvanized Steel Pole -->
        <!-- Core shadow/depth -->
        <path d="M 136 45 L 144 45 L 144 160 C 144 164, 136 164, 136 160 Z" fill="#222f3e" />
        <!-- Metallic reflection -->
        <path d="M 136 45 L 142 45 L 142 160 C 142 164, 136 164, 136 160 Z" fill="url(#steelPole)" />
        <!-- Aesthetic Pole Rings -->
        <ellipse cx="140" cy="80" rx="4.5" ry="2" fill="#dcdde1" stroke="#2f3640" stroke-width="0.5" />
        <ellipse cx="140" cy="115" rx="4.5" ry="2" fill="#dcdde1" stroke="#2f3640" stroke-width="0.5" />
        <!-- Horizontal Arm Extrusion -->
        <!-- Shadow -->
        <path d="M 100 135 L 140 135 L 140 144 L 100 144 Z" fill="#222f3e" />
        <!-- Highlight -->
        <path d="M 100 135 L 140 135 L 140 139 L 100 139 Z" fill="#a4b0be" />
        <path d="M 100 135 L 140 135 L 140 137 L 100 137 Z" fill="#ffffff" />
        <!-- Arm Cap -->
        <ellipse cx="100" cy="139" rx="2" ry="5" fill="#718093" />
        <!-- ============================== -->
        <!-- THE SIGNAL HOUSING             -->
        <!-- ============================== -->
        <g transform="translate(80, 105)">
          <!-- Back Depth (Thickness of the box) -->
          <path d="M 0 0 L 35 0 L 35 -65 L 0 -65 Z" fill="#263238" />
          <path d="M 35 0 L 40 5 L 40 -60 L 35 -65 Z" fill="#10141a" />
          <!-- Backplate Glow (Subtle backlighting effect) -->
          <path d="M 5 5 L 40 5 L 40 -60 L 5 -60 Z" fill="none" stroke="#576574" stroke-width="2" opacity="0.3" filter="url(#beautyGlow)" />
          <!-- Main Front Face (Obsidian texture) -->
          <path d="M 5 5 L 40 5 L 40 -60 L 5 -60 Z" fill="url(#housingBody)" stroke="url(#housingEdge)" stroke-width="1.5" stroke-linejoin="round" />
          <!-- Housing Detail Grooves -->
          <line x1="8" y1="-17" x2="37" y2="-17" stroke="#222f3e" stroke-width="1.5" />
          <line x1="8" y1="-39" x2="37" y2="-39" stroke="#222f3e" stroke-width="1.5" />
          <!-- Sun Visors (Hoods over the lights) -->
          <!-- Red Hood -->
          <path d="M 14 -51 C 14 -60, 32 -60, 32 -51 C 32 -48, 14 -48, 14 -51 Z" fill="#10141a" />
          <path d="M 14 -51 C 14 -60, 32 -60, 32 -51" fill="none" stroke="#718093" stroke-width="1" />
          <!-- Yellow Hood -->
          <path d="M 14 -29 C 14 -38, 32 -38, 32 -29 C 32 -26, 14 -26, 14 -29 Z" fill="#10141a" />
          <path d="M 14 -29 C 14 -38, 32 -38, 32 -29" fill="none" stroke="#718093" stroke-width="1" />
          <!-- Green Hood -->
          <path d="M 14 -7 C 14 -16, 32 -16, 32 -7 C 32 -4, 14 -4, 14 -7 Z" fill="#10141a" />
          <path d="M 14 -7 C 14 -16, 32 -16, 32 -7" fill="none" stroke="#718093" stroke-width="1" />
          <!-- === THE LENSES === -->
          <!-- Off state base lenses -->
          <circle cx="23" cy="-45" r="7.5" fill="url(#glassOff)" stroke="#222f3e" stroke-width="1" />
          <circle cx="23" cy="-23" r="7.5" fill="url(#glassOff)" stroke="#222f3e" stroke-width="1" />
          <circle cx="23" cy="-1" r="7.5" fill="url(#glassOff)" stroke="#222f3e" stroke-width="1" />
          <!-- Glowing Animated States -->
          <!-- Red Light -->
          <g class="light-state light-red">
            <!-- Massive environmental cast glow -->
            <circle cx="23" cy="-45" r="15" fill="#ff6b81" filter="url(#castGlowLight)" opacity="0.6" />
            <!-- The actual lens -->
            <circle cx="23" cy="-45" r="7.5" fill="url(#glowRed)" filter="url(#beautyGlow)" />
            <circle cx="23" cy="-45" r="7.5" fill="none" stroke="#ffb8b8" stroke-width="0.5" />
            <!-- Inner focused brightness -->
            <circle cx="23" cy="-45" r="3" fill="#ffffff" opacity="0.8" filter="url(#beautyGlow)" />
          </g>
          <!-- Yellow Light -->
          <g class="light-state light-yellow">
            <circle cx="23" cy="-23" r="15" fill="#ffc07c" filter="url(#castGlowLight)" opacity="0.6" />
            <circle cx="23" cy="-23" r="7.5" fill="url(#glowYellow)" filter="url(#beautyGlow)" />
            <circle cx="23" cy="-23" r="7.5" fill="none" stroke="#fdfbfb" stroke-width="0.5" />
            <circle cx="23" cy="-23" r="3" fill="#ffffff" opacity="0.8" filter="url(#beautyGlow)" />
          </g>
          <!-- Green Light -->
          <g class="light-state light-green">
            <circle cx="23" cy="-1" r="15" fill="#0ba360" filter="url(#castGlowLight)" opacity="0.6" />
            <circle cx="23" cy="-1" r="7.5" fill="url(#glowGreen)" filter="url(#beautyGlow)" />
            <circle cx="23" cy="-1" r="7.5" fill="none" stroke="#38f9d7" stroke-width="0.5" />
            <circle cx="23" cy="-1" r="3" fill="#ffffff" opacity="0.8" filter="url(#beautyGlow)" />
          </g>
          <!-- Static Glass Specular Reflections (Always visible over the lights) -->
          <ellipse cx="23" cy="-48" rx="4" ry="2" fill="#ffffff" opacity="0.5" transform="rotate(-15 23 -48)" />
          <ellipse cx="23" cy="-26" rx="4" ry="2" fill="#ffffff" opacity="0.5" transform="rotate(-15 23 -26)" />
          <ellipse cx="23" cy="-4" rx="4" ry="2" fill="#ffffff" opacity="0.5" transform="rotate(-15 23 -4)" />
        </g>
        <!-- ============================== -->
        <!-- THE TINY STORY CAR             -->
        <!-- ============================== -->
        <!-- Smoke effects -->
        <circle cx="60" cy="50" r="15" fill="#dcdde1" class="dust brake-dust" />
        <circle cx="50" cy="60" r="10" fill="#f5f6fa" class="dust brake-dust" />
        <circle cx="60" cy="50" r="12" fill="#718093" class="dust exhaust-smoke" />
        <circle cx="50" cy="60" r="18" fill="#dcdde1" class="dust exhaust-smoke" />
        <circle cx="45" cy="55" r="22" fill="#f5f6fa" class="dust exhaust-smoke" opacity="0.8" />
        <!-- The Car itself (Super Premium Cute Classic Taxi) -->
        <g class="mini-car" transform="translate(60, 50)">
          <!-- Car cast shadow -->
          <ellipse cx="0" cy="0" rx="20" ry="12" fill="#10141a" opacity="0.6" />
          <!-- Glossy Tires -->
          <rect x="-14" y="-12" width="6" height="4" rx="1" fill="#263238" />
          <rect x="8" y="-12" width="6" height="4" rx="1" fill="#263238" />
          <rect x="-14" y="8" width="6" height="4" rx="1" fill="#263238" />
          <rect x="8" y="8" width="6" height="4" rx="1" fill="#263238" />
          <!-- Main Taxi Body (Rounder, cuter geometry) -->
          <!-- Base volume/shadow -->
          <path d="M -16 -10 Q -20 0 -16 10 L 16 10 Q 22 0 16 -10 Z" fill="#a45a1f" />
          <path d="M -16 -10 Q -20 0 -16 10 L 16 10 Q 22 0 16 -10 Z" fill="url(#taxiYellow)" />
          <!-- Body upper curve thickness -->
          <path d="M -16 -10 Q -20 0 -16 10 L 0 10 Q 4 0 0 -10 Z" fill="#a45a1f" />
          <path d="M -14 -8 Q -18 0 -14 8 L 14 8 Q 18 0 14 -8 Z" fill="url(#taxiYellow)" />
          <!-- The Checkered Racing Stripe Belt -->
          <g fill="#222f3e">
            <rect x="-10" y="8" width="2" height="2" transform="skewX(-20)" />
            <rect x="-6" y="8" width="2" height="2" transform="skewX(-20)" />
            <rect x="-2" y="8" width="2" height="2" transform="skewX(-20)" />
            <rect x="2" y="8" width="2" height="2" transform="skewX(-20)" />
            <rect x="6" y="8" width="2" height="2" transform="skewX(-20)" />
          </g>
          <!-- Cute Glass Bubble Cabin -->
          <!-- Dark glass base (Rear/Sides) -->
          <path d="M -8 -6 C -12 -6, -12 6, -8 6 L 4 6 C 8 6, 8 -6, 4 -6 Z" fill="#263238" />
          <path d="M -8 -6 C -12 -6, -12 6, -8 6 L 4 6 C 8 6, 8 -6, 4 -6 Z" fill="none" stroke="#222f3e" stroke-width="1.5" />
          <!-- Front windshield (Sloped and glossy blue) -->
          <path d="M -2 -6 C 4 -6, 6 -3, 6 0 C 6 3, 4 6, -2 6 L 3 6 C 8 6, 8 -6, 3 -6 Z" fill="#4facfe" opacity="0.9" />
          <path d="M 0 -5 C 2 -5, 3 -2, 3 0 L 1 0 C 1 -2, 0 -3, -1 -3 Z" fill="#ffffff" opacity="0.6" /> <!-- Windshield gloss spec -->
          <!-- Cute Yellow Roof -->
          <path d="M -6 -5 C -9 -5, -9 5, -6 5 L 1 5 C 4 5, 4 -5, 1 -5 Z" fill="url(#taxiYellow)" />
          <!-- Iconic "TAXI" Roof Sign -->
          <rect x="-3" y="-3" width="5" height="6" rx="1.5" fill="#f5f6fa" />
          <rect x="-1.5" y="-3" width="2" height="6" fill="#f6a565" />
          <!-- Front Bumper & Headlights -->
          <path d="M 15 -7 Q 20 0 15 7" fill="none" stroke="#dcdde1" stroke-width="2.5" stroke-linecap="round" />
          <!-- Glowing Halogen Headlights -->
          <circle cx="15" cy="5" r="2.5" fill="#ffffff" filter="url(#beautyGlow)" />
          <circle cx="15" cy="-5" r="2.5" fill="#ffffff" filter="url(#beautyGlow)" />
          <!-- Soft, wide headlight beams illuminating the road -->
          <polygon points="16,5 50,22 55,0" fill="#fdfbfb" opacity="0.25" filter="url(#castGlowLight)" />
          <polygon points="16,-5 55,0 50,-22" fill="#fdfbfb" opacity="0.25" filter="url(#castGlowLight)" />
          <!-- Rear Bumper & Tail Lights -->
          <path d="M -15 -8 Q -18 0 -15 8" fill="none" stroke="#2f3640" stroke-width="2" stroke-linecap="round" />
          <!-- Neon red stop lights -->
          <circle cx="-15" cy="6" r="1.5" fill="#ff6b81" filter="url(#beautyGlow)" />
          <circle cx="-15" cy="-6" r="1.5" fill="#ff6b81" filter="url(#beautyGlow)" />
        </g>
      </g>
    </g>
  </g>
</svg>
